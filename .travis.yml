dist: trusty
language: node_js
node_js:
- '10.9'
addons:
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
    sonarcloud:
      organization: sytw2019
    token:
      secure: V3XV10zQLE461U80uatOzqoXGZj+AJVlbcMI+eC509HXUOsW1BhB7GjpLUfJAm8lcmmqfc2+sx8rfCUEy7aOonbWPuwGjK4KJyjiXKNZ38S9kJadlhmKkmHFTWS9dE1Yno78DJkrgW+bSML7PQuUOnvKKD6OEFNZoQwk24ffT60OjR6Em4Wfb9EmridTkFdXGjTrKr+Lanu+sKSTsgBXTD3hX54MMfFNYmLSIVaXI0T0UoXzlSYqVks7iIILwte5yJxFA4FQauUatRZpVcm/KIfR0Bl+kyxvafviLI7thdT+uVLznb3lbc3zD5oNiotegWJfusyBzzsJhS5ZFLBJ3rQPUJPX/QXAH57nIZruvBk/YWltMK+K1gyh6C3oqL0MNVOT2wXuezbOjicVhb0oVqPu5nkkS4fc3/k92TpVNeJc1vQ4RASKxmn1okw0bINf+tp683nYWFdkYaQwpFF/2d9G4zag1TnrT5xddeU8AWAPI1jBhi/ptz1g1cCdKIwv+ZAvd3YhMo1RSuOJwyTCEPA0wb/FEQBbpQzl9/5SUnIoIWZi2cekx0+H+4vA7GlG1g4ZxQ0hrE3KL33syNi9vTRRG60WSaAaY38qQCM2SlS/wxLQAllKAUJRTsWcz2tc1G+SDk2L/HJaWSOu6a8V6ejjHePZI3e8cwP+i8k9HdY=
      secure: my/FvyqlXjYUlz8eQDiOyXBLICP0CkzGkBqF2/gE1VCHpp6EBkCSO8fa8p+VZtf3bLdKwuS/pnq6TAxJGD01hUWJ7z+GUVMTgeWBmal0LDsyLFkjh9FDMg5GOzTAApdfclw7VpKTDXnlyaK3JWxEGy/rbxpKZZNiKxAneli5gQb7y2m7p5GMX5WWtqrF+iTpWzOivYIpo5k63TVpPuXSJTDkoEu3qkTA7+bFEa4sXVWR07nFYSoH//IxB7WNUv4sVtHyc8Tl+8d+I2sNVSn6Jiek087wl4m6iAeWZHl2px74pHvVw4gmciImsUM2WHeDgQiDZvtrqdplduOYLWdisYSFzvY2a9F5iW+BrHmOWzT5vekE9pwc7fTYD3/cNaKflu3c6iwMZHLyrenKjf6y6MuocmlnlM7zi0C35QlQxodVrN7heVgRhE2JYBAbB66cU4x8pP4gVV7YIco9JL3pB1ghb3/d/gkpGwmV6lFLDQW/IRk8jafwW51fSy8Lvrj7dQ32XV+UFV4YrXU8aYLvNhntHS97OUYOfJew7ILzAqWR323dNYV02yeZ7qIoUP00VJendrTW5OwODn7zNkOYGxxSD/HU8kLqL5Ll9n+w/4kB/0XLcVOAW609ugZ3Tl2pWZ4UZpLCLd70NjjwBfBLr6u3X3CNFF1QVHOFJTyN+/M=

cache:
  directories:
  - "./tiendaOnlineLogMen/node_modules"
before_install: 
- cd tiendaOnlineLogMen
- wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-3.3.0.1492-linux.zip
- unzip sonar-scanner-cli-3.3.0.1492-linux.zip -d /tmp
  #script:
   # /tmp/sonar-scanner-3.3.0.1492-linux/bin/sonar-scanner -Dsonar.projectKey=$SONARQUBE_PROJECT_KEY -Dsonar.sources=. -Dsonar.host.url=$SONARQUBE_URL -Dsonar.login=$SONARQUBE_LOGIN
install:
- npm install
notifications:
  slack: sytw:eFSSfJ93dL6SYCHkgOxiacNL
env:
  global:
  - secure: my/FvyqlXjYUlz8eQDiOyXBLICP0CkzGkBqF2/gE1VCHpp6EBkCSO8fa8p+VZtf3bLdKwuS/pnq6TAxJGD01hUWJ7z+GUVMTgeWBmal0LDsyLFkjh9FDMg5GOzTAApdfclw7VpKTDXnlyaK3JWxEGy/rbxpKZZNiKxAneli5gQb7y2m7p5GMX5WWtqrF+iTpWzOivYIpo5k63TVpPuXSJTDkoEu3qkTA7+bFEa4sXVWR07nFYSoH//IxB7WNUv4sVtHyc8Tl+8d+I2sNVSn6Jiek087wl4m6iAeWZHl2px74pHvVw4gmciImsUM2WHeDgQiDZvtrqdplduOYLWdisYSFzvY2a9F5iW+BrHmOWzT5vekE9pwc7fTYD3/cNaKflu3c6iwMZHLyrenKjf6y6MuocmlnlM7zi0C35QlQxodVrN7heVgRhE2JYBAbB66cU4x8pP4gVV7YIco9JL3pB1ghb3/d/gkpGwmV6lFLDQW/IRk8jafwW51fSy8Lvrj7dQ32XV+UFV4YrXU8aYLvNhntHS97OUYOfJew7ILzAqWR323dNYV02yeZ7qIoUP00VJendrTW5OwODn7zNkOYGxxSD/HU8kLqL5Ll9n+w/4kB/0XLcVOAW609ugZ3Tl2pWZ4UZpLCLd70NjjwBfBLr6u3X3CNFF1QVHOFJTyN+/M=
  - secure: V3XV10zQLE461U80uatOzqoXGZj+AJVlbcMI+eC509HXUOsW1BhB7GjpLUfJAm8lcmmqfc2+sx8rfCUEy7aOonbWPuwGjK4KJyjiXKNZ38S9kJadlhmKkmHFTWS9dE1Yno78DJkrgW+bSML7PQuUOnvKKD6OEFNZoQwk24ffT60OjR6Em4Wfb9EmridTkFdXGjTrKr+Lanu+sKSTsgBXTD3hX54MMfFNYmLSIVaXI0T0UoXzlSYqVks7iIILwte5yJxFA4FQauUatRZpVcm/KIfR0Bl+kyxvafviLI7thdT+uVLznb3lbc3zD5oNiotegWJfusyBzzsJhS5ZFLBJ3rQPUJPX/QXAH57nIZruvBk/YWltMK+K1gyh6C3oqL0MNVOT2wXuezbOjicVhb0oVqPu5nkkS4fc3/k92TpVNeJc1vQ4RASKxmn1okw0bINf+tp683nYWFdkYaQwpFF/2d9G4zag1TnrT5xddeU8AWAPI1jBhi/ptz1g1cCdKIwv+ZAvd3YhMo1RSuOJwyTCEPA0wb/FEQBbpQzl9/5SUnIoIWZi2cekx0+H+4vA7GlG1g4ZxQ0hrE3KL33syNi9vTRRG60WSaAaY38qQCM2SlS/wxLQAllKAUJRTsWcz2tc1G+SDk2L/HJaWSOu6a8V6ejjHePZI3e8cwP+i8k9HdY=

script:
- npm run test -- --watch=false --no-progress --browsers=ChromeHeadlessNoSandbox
- cd ..
- /tmp/sonar-scanner-3.3.0.1492-linux/bin/sonar-scanner -Dsonar.projectKey=SyTW2019_E11 -Dsonar.sources=. -Dsonar.host.url=$SONARQUBE_URL -Dsonar.login=$SONARQUBE_LOGIN
- sonar-scanner
